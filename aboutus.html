<!DOCTYPE html>
<html>
    <head>
        <!-- Tells the browser how to read the webpage properly -->
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        
        <!-- Sets the title of the webpage shown on the browser tab -->
        <title>1.2 base</title>
        
        <!-- Gives search engines info (not really filled out here) -->
        <meta name="description" content="">
        
        <!-- Makes the website responsive (works well on phones, tablets, etc.) -->
        <meta name="viewport" content="width=device-width, initial-scale=1">
        
        <!-- Links to our CSS file for custom styles -->
        <link rel="stylesheet" href="codered.css">
    </head>
    <body>

        <!-- Accessibility Menu Button -->
        <button class="accessibility-menu" onclick="toggleAccessibilityMenu()">Menu</button>

        <!-- Menu content for accessibility features -->
        <div class="accessibility-menu-content" id="accessibilityMenu">
            <h2>Accessibility Menu</h2>
            <!-- Decorative line -->
            <hr style="background-color: #A6886D; height: 2px; border: none;">

            <!-- Checkbox for high contrast mode -->
            <label>
                <input type="checkbox" id="highContrastMode" onchange="toggleHighContrastMode()">
                High Contrast Mode
            </label>

            <!-- Checkbox for extra readable font -->
            <label>
                <input type="checkbox" id="extraReadableFont" onchange="toggleExtraReadableFont()">
                Extra Readable Font
            </label>

            <!-- Space before next section -->
            <br><br>

            <h2>Contact / Feedback Form</h2>
            <hr style="background-color: #A6886D; height: 2px; border: none;">

            <!-- Button that links to a form page -->
            <button class="button" onclick="window.location.href='form.html'">
                <span>Form</span>
            </button>
        </div>

        <!-- Loading screen animation (spinner) shown during page load -->
        <div class="LoadingScreen">
            <div class="spinner">
                <!-- Spinner parts (can be styled with CSS) -->
                <div></div><div></div><div></div><div></div><div></div>
                <div></div><div></div><div></div><div></div><div></div>
            </div>
        </div>

        <!-- Website navigation bar -->
        <nav class="navbar">
            <ul class="nav-links">
                <!-- List of pages with navigation links -->
                <li><a href="index.html" onclick="return !isCurrentPage('index.html')">Landing</a></li>
                <li><a href="trailer.html" onclick="return !isCurrentPage('trailer.html')">Trailer</a></li>
                <li><a href="aboutus.html" onclick="return !isCurrentPage('aboutus.html')">About</a></li>
                <li><a href="pricing.html" onclick="return !isCurrentPage('pricing.html')">Pricing</a></li>
                <li><a href="gallery.html" onclick="return !isCurrentPage('gallery.html')">Gallery</a></li>
            </ul>
        </nav>

        <!-- About us section -->
        <div class="aboutus">
            <div class="aboutus-content">
                <div class="aboutus-content-inner">Who We Are</div>

                <!-- Team section -->
                <div class="team-section">
                    <h2>Our Development Team</h2>
                    <p class="team-intro">We are a passionate team... (introduction text)</p>

                    <!-- Grid showing team members -->
                    <div class="team-grid">
                        <!-- Each member card opens more info when clicked or Enter/Space is pressed -->
                        <div class="team-card" onclick="toggleTeamInfo(this)" tabindex="0" role="button" onkeydown="if(event.key==='Enter'||event.key===' '){toggleTeamInfo(this);}">
                            <h3>Nikhil</h3>
                            <p>Web designer (front-end)</p>
                            <p class="role">About and pricing pages</p>
                            <div class="info-box">Extra info about Nikhil</div>
                        </div>
                        <!-- Repeat for other members -->
                        <div class="team-card" onclick="toggleTeamInfo(this)" tabindex="0" role="button" onkeydown="if(event.key==='Enter'||event.key===' '){toggleTeamInfo(this);}">
                            <h3>Oscar</h3>
                            <p>Web designer (front-end)</p>
                            <p class="role">Landing and gallery pages</p>
                            <div class="info-box">Extra info about Oscar</div>
                        </div>
                        <div class="team-card" onclick="toggleTeamInfo(this)" tabindex="0" role="button" onkeydown="if(event.key==='Enter'||event.key===' '){toggleTeamInfo(this);}">
                            <h3>Matthew</h3>
                            <p>3D Modeler</p>
                            <p class="role">Game assets and props</p>
                            <div class="info-box">Extra info about Matthew</div>
                        </div>
                        <div class="team-card" onclick="toggleTeamInfo(this)" tabindex="0" role="button" onkeydown="if(event.key==='Enter'||event.key===' '){toggleTeamInfo(this);}">
                            <h3>Finlay</h3>
                            <p>3D Modeler</p>
                            <p class="role">Hospital environment</p>
                            <div class="info-box">Extra info about Finlay</div>
                        </div>
                    </div>

                    <!-- Scroll down indicator -->
                    <div class="scroll-indicator">
                        <div>Scroll for More</div>
                        <div>↓</div>
                    </div>

                    <!-- Development timeline (scrollable) -->
                    <div class="development-section">
                        <h2>Development Process</h2>
                        <div class="process-timeline">
                            <!-- Each stage in the development has a card -->
                            <div class="process-card">
                                <h3>Research</h3>
                                <p>Historical research and location scouting.</p>
                            </div>
                            <div class="process-arrow">→</div>
                            <div class="process-card">
                                <h3>Concept</h3>
                                <p>Initial artwork and game mechanics.</p>
                            </div>
                            <div class="process-arrow">→</div>
                            <div class="process-card">
                                <h3>Design</h3>
                                <p>Environment and character design.</p>
                            </div>
                            <div class="process-arrow">→</div>
                            <div class="process-card">
                                <h3>Development</h3>
                                <p>Core gameplay implementation.</p>
                            </div>
                            <div class="process-arrow">→</div>
                            <div class="process-card">
                                <h3>Testing</h3>
                                <p>Quality assurance and refinement.</p>
                            </div>
                            <div class="process-arrow">→</div>
                            <div class="process-card">
                                <h3>Release</h3>
                                <p>Final polish and launch.</p>
                            </div>
                        </div>
                    </div>

                    <!-- Social media section -->
                    <div class="connect-section">
                        <h2>Connect With Us</h2>
                        <div class="social-links">
                            <!-- Replace # with real links -->
                            <a href="#">Twitter</a>
                            <a href="#">Discord</a>
                            <a href="#">Instagram</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Moving background canvas for particle animation -->
        <canvas id="background-canvas"></canvas>

        <!-- JavaScript section to add interactivity -->
        <script>
            // Animates letters to float and flicker
            function wrapLetters(selector, delayIncrement = 0.3) {
                const el = document.querySelector(selector);
                if (!el) return;
                const text = el.textContent;
                el.innerHTML = '';
                [...text].forEach((char, index) => {
                    const span = document.createElement('span');
                    span.textContent = char;
                    if (char === ' ') span.classList.add('space');
                    span.style.animation = `flicker 3s infinite ease-in-out 0s, floatSingle 4.5s infinite cubic-bezier(0.4, 0, 0.2, 1) ${(index * delayIncrement).toFixed(2)}s`;
                    el.appendChild(span);
                });
            }

            wrapLetters('.aboutus-content-inner');
            wrapLetters('.team-intro');

            // Show loading screen briefly on page load
            const currentPage = window.location.pathname.split('/').pop();
            const loadingScreen = document.querySelector('.LoadingScreen');
            if (document.referrer === '' || !document.referrer.includes(currentPage)) {
                loadingScreen.style.display = 'flex';
            } else {
                loadingScreen.style.display = 'none';
            }

            // Hide loading screen after a short delay
            window.addEventListener('load', () => {
                if (loadingScreen.style.display === 'flex') {
                    setTimeout(() => {
                        loadingScreen.style.opacity = '0';
                        setTimeout(() => {
                            loadingScreen.style.display = 'none';
                        }, 1000);
                    }, 2000);
                }
            });

            // Extra fallback timeout
            setTimeout(() => {
                if (loadingScreen.style.display === 'flex') {
                    loadingScreen.style.opacity = '0';
                    setTimeout(() => {
                        loadingScreen.style.display = 'none';
                    }, 3000);
                }
            }, 5000);

            // Stops users from clicking links to pages they’re already on
            function isCurrentPage(href) {
                return window.location.pathname.endsWith(href);
            }

            // Shows/hides the accessibility menu
            function toggleAccessibilityMenu() {
                const menu = document.getElementById('accessibilityMenu');
                menu.classList.toggle('show');
            }

            // Hide accessibility menu if you click outside it
            document.addEventListener('click', function(event) {
                const menu = document.getElementById('accessibilityMenu');
                const button = document.querySelector('.accessibility-menu');
                if (!menu.contains(event.target) && !button.contains(event.target)) {
                    menu.classList.remove('show');
                }
            });

            // Toggle more readable font
            function toggleExtraReadableFont() {
                const checkbox = document.getElementById('extraReadableFont');
                const body = document.body;
                if (checkbox.checked) {
                    body.classList.add('extra-readable-font');
                    localStorage.setItem('extraReadableFont', 'true');
                } else {
                    body.classList.remove('extra-readable-font');
                    localStorage.setItem('extraReadableFont', 'false');
                }
            }

            // Toggle high contrast mode
            function toggleHighContrastMode() {
                const checkbox = document.getElementById('highContrastMode');
                const body = document.body;
                // Many things are updated here: cards, arrows, links, etc.
                // Switch between white text and dark background for accessibility
                const processCards = document.querySelectorAll('.process-card');
                const socialLinks = document.querySelectorAll('.social-link');
                const arrows = document.querySelectorAll('.process-arrow');
                const sectionTitles = document.querySelectorAll('.team-section h2, .development-section h2, .connect-section h2');
                const scrollIndicator = document.querySelector('.scroll-indicator');

                if (checkbox.checked) {
                    body.classList.add('high-contrast-mode');
                    localStorage.setItem('highContrastMode', 'true');
                    processCards.forEach(card => {
                        card.style.background = 'linear-gradient(45deg, rgba(0, 0, 0, 0.9), rgba(0, 0, 0, 0.9))';
                        card.style.border = '2px solid white';
                        card.querySelector('h3').style.color = 'white';
                        card.querySelector('p').style.color = 'white';
                    });
                    arrows.forEach(arrow => {
                        arrow.style.color = 'white';
                        arrow.style.textShadow = '0 0 10px white';
                    });
                    socialLinks.forEach(link => {
                        link.style.color = 'white';
                        link.style.border = '2px solid white';
                    });
                    sectionTitles.forEach(title => {
                        title.style.color = 'white';
                    });
                    if (scrollIndicator) {
                        scrollIndicator.querySelector('div:first-child').style.color = 'white';
                        scrollIndicator.querySelector('div:last-child').style.color = 'white';
                        scrollIndicator.querySelector('div:last-child').style.textShadow = '0 0 10px white';
                    }
                } else {
                    body.classList.remove('high-contrast-mode');
                    localStorage.setItem('highContrastMode', 'false');
                    // Restore original colours
                    processCards.forEach(card => {
                        card.style.background = 'linear-gradient(45deg, rgba(24, 24, 24, 0.9), rgba(36, 36, 36, 0.9))';
                        card.style.border = '2px solid #a6886d';
                        card.querySelector('h3').style.color = '#a6886d';
                        card.querySelector('p').style.color = '#e2d3b6';
                    });
                    arrows.forEach(arrow => {
                        arrow.style.color = '#a6886d';
                        arrow.style.textShadow = '0 0 10px #a6886d';
                    });
                    socialLinks.forEach(link => {
                        link.style.color = '#a6886d';
                        link.style.border = '2px solid #a6886d';
                    });
                    sectionTitles.forEach(title => {
                        title.style.color = '#a6886d';
                    });
                    if (scrollIndicator) {
                        scrollIndicator.querySelector('div:first-child').style.color = '#a6886d';
                        scrollIndicator.querySelector('div:last-child').style.color = '#a6886d';
                        scrollIndicator.querySelector('div:last-child').style.textShadow = '0 0 10px #a6886d';
                    }
                }
            }

            // Apply saved accessibility settings on page load
            document.addEventListener('DOMContentLoaded', () => {
                if (localStorage.getItem('extraReadableFont') === 'true') {
                    document.body.classList.add('extra-readable-font');
                    document.getElementById('extraReadableFont').checked = true;
                }
                if (localStorage.getItem('highContrastMode') === 'true') {
                    document.getElementById('highContrastMode').checked = true;
                    toggleHighContrastMode();
                }
            });

            // Hide scroll indicator when user scrolls down
            const scrollIndicator = document.querySelector('.scroll-indicator');
            window.addEventListener('scroll', () => {
                if (window.scrollY > 100) {
                    scrollIndicator.style.opacity = '0';
                    setTimeout(() => {
                        scrollIndicator.style.display = 'none';
                    }, 500);
                }
            });

            // Particle background animation
            const canvas = document.getElementById('background-canvas');
            const ctx = canvas.getContext('2d');
            let width = window.innerWidth;
            let height = window.innerHeight;
            canvas.width = width;
            canvas.height = height;
            canvas.style.position = 'fixed';
            canvas.style.top = 0;
            canvas.style.left = 0;
            canvas.style.zIndex = '1'; // Behind content
            canvas.style.width = '100vw';
            canvas.style.height = '100vh';
            canvas.style.pointerEvents = 'none';

            // Make animated particles float around
            const particles = [];
            const particleCount = 60;
            for (let i = 0; i < particleCount; i++) {
                particles.push({
                    x: Math.random() * width,
                    y: Math.random() * height,
                    r: 1 + Math.random() * 2,
                    dx: -0.5 + Math.random(),
                    dy: -0.5 + Math.random(),
                    alpha: 0.1 + Math.random() * 0.3
                });
            }

            function animate() {
                ctx.clearRect(0, 0, width, height);
                for (let p of particles) {
                    ctx.beginPath();
                    ctx.arc(p.x, p.y, p.r, 0, 2 * Math.PI);
                    ctx.fillStyle = `rgba(166, 136, 109, ${p.alpha})`;
                    ctx.shadowColor = '#A6886D';
                    ctx.shadowBlur = 8;
                    ctx.fill();
                    p.x += p.dx;
                    p.y += p.dy;
                    if (p.x < 0 || p.x > width) p.dx *= -1;
                    if (p.y < 0 || p.y > height) p.dy *= -1;
                }
                requestAnimationFrame(animate);
            }
            animate();

            // Show/hide team info cards when clicked
            function toggleTeamInfo(card) {
                const boxes = document.querySelectorAll('.team-card .info-box');
                boxes.forEach(box => {
                    if (box !== card.querySelector('.info-box')) {
                        box.style.display = 'none';
                    }
                });
                const infoBox = card.querySelector('.info-box');
                infoBox.style.display = infoBox.style.display === 'block' ? 'none' : 'block';
            }

            // Hide team info if clicking outside
            document.addEventListener('click', function (e) {
                if (!e.target.closest('.team-card')) {
                    const boxes = document.querySelectorAll('.team-card .info-box');
                    boxes.forEach(box => {
                        box.style.display = 'none';
                    });
                }
            });
        </script>
    </body>
</html>
